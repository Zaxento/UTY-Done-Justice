<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_floweynice</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>spr_floweysideshock</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.currentsong = mus_flowey_yellow
caster_loop(global.currentsong, 1, 1)
floweysong = global.currentsong
global.inbattle = 1
image_xscale = 2
image_yscale = 2
image_speed = 0
global.border = 3
conversation = 0
alarm[0] = 10
global.faceemotion = 0
SCR_BORDERSETUP(0, 0, 0, 0, 0)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>room_goto(rm_darkruins_03)
global.interact = 1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>sprite_index = spr_floweypissed
alarm[11] = 60
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="9">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (conversation &lt;= 15)
{
    audio_stop_sound(snd_floweylaugh)
    global.hshake = 3
    global.shakespeed = 1.5
    global.vshake = 3
    audio_play_sound(snd_power,80,false)
    global.hp = global.maxhp
    instance_create(0, 0, obj_shaker)
    if instance_exists(obj_fakepellet)
        obj_fakepellet.x = -800
    conversation = 16
    image_speed = 0
    instance_create((x + 200), (y + 10), obj_torielflame_X)
    alarm[10] = 60
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="8">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>with (funwriter)
    instance_destroy()
global.typer = 6
blcon = instance_create((x + sprite_width), y, obj_blconwdflowey)
conversation = 19
//global.msc = 673
global.msg[0] = scr_gettext("scr_text_floweyintro_22") // \E3You sicko!^2 &amp;Are you doing this&amp;on purpose?!/
global.msg[1] = scr_gettext("scr_text_floweyintro_23") // Fine!^2 I'll just stop&amp;sending them then./%%
blconwriter = instance_create((obj_blconwdflowey.x + 40), (obj_blconwdflowey.y + 10), OBJ_WRITER)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(obj_blconwdflowey)
{
    with (obj_blconwdflowey)
        instance_destroy()
}
alarm[8] = 30
audio_stop_sound(floweysong)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>sprite_index = spr_floweyside
alarm[5] = 40
conversation = 9.300000000000001
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>with (blconwriter)
    instance_destroy()
global.msc = 0
global.msg[0] = scr_gettext("obj_floweybattle1_268") // Is this a joke^2?&amp;Are you braindead^2?&amp;RUN^2. INTO^2. THE.&amp;friendliness pellets/
global.msg[1] = scr_gettext("obj_floweybattle1_269") // /
global.msg[2] = scr_gettext("obj_floweybattle1_270") // /
global.msg[3] = scr_gettext("obj_floweybattle1_271") // /
global.msg[4] = scr_gettext("obj_floweybattle1_272") // /
global.msg[5] = scr_gettext("obj_floweybattle1_273") // /
global.msg[6] = scr_gettext("obj_floweybattle1_274") // /
global.msg[7] = scr_gettext("obj_floweybattle1_275") // /
global.msg[8] = scr_gettext("obj_floweybattle1_276") // /
global.msg[9] = scr_gettext("obj_floweybattle1_277") // /
global.msg[10] = scr_gettext("obj_floweybattle1_278") // stop it
funwriter = instance_create((obj_blconwdflowey.x + 40), (obj_blconwdflowey.y + 10), OBJ_INSTAWRITER)
sprite_index = spr_floweynice
image_index = 1
image_speed = 0
conversation = 9.4
for (i = 0; i != 5; i += 1)
{
    ddd = instance_find(obj_friendlypellet, i)
    ddd.x = ddd.blonicx
    ddd.y = ddd.blonicy
    ddd.attackyou = 1
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//I don't really know if this japanese part of UNDERTALE's code is necessary, so I will comment it out to be safe.
//if (global.language != "ja")
//    alarm[6] = 170
global.typer = 6
blcon = instance_create((x + sprite_width), y, obj_blconwdflowey)
conversation = 11
//global.msc = 672
global.msg[0] = scr_gettext("scr_text_floweyintro_20") // \E8What are you doing?^2 &amp;Dodge.^1 The.^1 Bullets./
global.msg[1] = scr_gettext("scr_text_floweyintro_21") // \E0Don't mess it up&amp;this time./%%
blconwriter = instance_create((obj_blconwdflowey.x + 40), (obj_blconwdflowey.y + 10), OBJ_WRITER)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.typer = 6
blcon = instance_create((x + sprite_width), y, obj_blconwdflowey)
conversation = 6
//global.msc = 671
global.msg[0] = scr_gettext("scr_text_floweyintro_16") // \E7Sorry about that./
global.msg[1] = scr_gettext("scr_text_floweyintro_17") // \E0Let's try again!/%%
blconwriter = instance_create((obj_blconwdflowey.x + 40), (obj_blconwdflowey.y + 10), OBJ_WRITER)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.typer = 20
blcon = instance_create((x + sprite_width), y, obj_blconwdflowey)
conversation = 14
global.msc = 670
blconwriter = instance_create((obj_blconwdflowey.x + 40), (obj_blconwdflowey.y + 10), OBJ_WRITER)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.typer = 7
blcon = instance_create((x + sprite_width), y, obj_blconwdflowey)
conversation = 12
global.msc = 669
blconwriter = instance_create((obj_blconwdflowey.x + 40), (obj_blconwdflowey.y + 10), OBJ_WRITER)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>blcon = instance_create((x + sprite_width), y, obj_blconwdflowey)
//global.msc = 666
global.msg[0] = scr_gettext("scr_text_floweyintro_7") // See that heart^1? &amp;That is your SOUL^1,&amp;the very culmination&amp;of your being!/
global.msg[1] = scr_gettext("scr_text_floweyintro_8") // Your LV represents&amp;your LOVE...^2 it's.../
global.msg[2] = scr_gettext("scr_text_floweyintro_9") // Heh...^2 I'm sure you&amp;won't have to worry&amp;about that./
global.msg[3] = scr_gettext("scr_text_floweyintro_10") // In the Underground,^1 &amp;monsters may try&amp;to attack you!/
global.msg[4] = scr_gettext("scr_text_floweyintro_11") // If you see bullets&amp;like these.../
global.msg[5] = scr_gettext("scr_text_floweyintro_12") // You need to avoid&amp; them at all costs!/
global.typer = 6
conversation = 1
image_speed = 0.2
instance_create((obj_fakeheart.x - 14), (obj_fakeheart.y - 14), obj_guidearrows)
blconwriter = instance_create((obj_blconwdflowey.x + 40), (obj_blconwdflowey.y + 10), OBJ_WRITER)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>SCR_BORDERSETUP(0, 0, 0, 0, 0)
//Adding this manually so I can get Flowey to change expression based on textdata
if (global.faceemotion == 0 &amp;&amp; sprite_index != spr_floweynice)
    sprite_index = spr_floweynice;

if (global.faceemotion == 1 &amp;&amp; sprite_index != spr_floweynicesideum) //Replacable
    sprite_index = spr_floweynicesideum;

if (global.faceemotion == 2 &amp;&amp; sprite_index != spr_floweysassy)
    sprite_index = spr_floweysassy;

if (global.faceemotion == 3 &amp;&amp; sprite_index != spr_floweypissed)
    sprite_index = spr_floweypissed;

if (global.faceemotion == 4 &amp;&amp; sprite_index != spr_floweyevil)
    sprite_index = spr_floweyevil;

if (global.faceemotion == 5 &amp;&amp; sprite_index != spr_floweygrin)
    sprite_index = spr_floweygrin;
    
if (global.faceemotion == 6 &amp;&amp; sprite_index != spr_floweyniceside) //replaced spr_floweytoriel
    sprite_index = spr_floweyniceside;
    
if (global.faceemotion == 7 &amp;&amp; sprite_index != spr_floweyplainside) //replaced spr_floweytoriel2
    sprite_index = spr_floweyplainside;
    
if (global.faceemotion == 8 &amp;&amp; sprite_index != spr_floweyplain)
    sprite_index = spr_floweyplain;

if (global.faceemotion == 9 &amp;&amp; sprite_index != spr_floweyworried)
    sprite_index = spr_floweyworried;

if instance_exists(OBJ_WRITER)
{
    if (OBJ_WRITER.halt != false)
    {
        image_speed = 0
        image_index = 0
    }
    else
    {
        image_speed = 0.2
        if (OBJ_WRITER.stringpos &gt;= string_length(OBJ_WRITER.originalstring))
        {
            //If there is a Japanese language localization... This will probably need to be addressed? I don't really know what it's meant for.
            if (conversation == 9.199999999999999 &amp;&amp; global.language == "ja")
            {
                alarm[6] = 10
                conversation = 9.25
            }
        }
    }
}
//if (instance_exists(obj_winkstar) == 0)
//{
    if (instance_exists(OBJ_WRITER) == 0)
    {
        if (conversation == 15)
        {
            instance_create(0, 0, obj_unfader)
            alarm[11] = 20
            image_speed = 0
            image_index = 0
            conversation = 16
        }
        //Just want to reuse this part of the code
        if (conversation == 14)
        {
            blcon = instance_create((x + sprite_width), y, obj_blconwdflowey)
            global.msg[0] = scr_gettext("scr_text_floweyintro_14") // Nice job there,^1&amp; buddy!^2 In case you&amp;do get hit,^1 I can&amp;SAVE your progress!/
            global.msg[1] = scr_gettext("scr_text_floweyintro_15") // That means if&amp;something bad&amp;happens,^1 I can make&amp;it unhappen for you./%%
            blconwriter = instance_create((obj_blconwdflowey.x + 40), (obj_blconwdflowey.y + 10), OBJ_WRITER)
            conversation = 15
        }
        if (conversation == 9) //Get hit by bullets second time.
        {
            alarm[4] = 30
            audio_sound_pitch(floweysong, 0.9)
            conversation = 10
        }
        if (conversation == 4) //Get hit by bullets first time.
        {
            audio_sound_pitch(floweysong, 0.95)
            conversation = 5
            alarm[3] = 30
        }
        if (conversation == 3)
        {
            with (blcon)
                instance_destroy()
            image_index = 0
            image_speed = 0
        }
        if (conversation == 12)
        {
            obj_friendlypellet.attackyou = 1
            //global.msc = 668
            conversation = 13
        }
        if (conversation == 7)
        {
            obj_friendlypellet.attackyou = 1
            //global.msc = 668
            global.msg[0] = scr_gettext("scr_text_floweyintro_18") // Here they come!^2 &amp;Dodge them all!/%%
            global.msg[1] = scr_gettext("SCR_BATTLETEXT_YELLOW_1") // %%%
            blconwriter = instance_create((obj_blconwdflowey.x + 40), (obj_blconwdflowey.y + 10), OBJ_WRITER)
            conversation = 8
        }
        if (conversation == 2)
        {
            obj_friendlypellet.attackyou = 1
            //global.msc = 668
            global.msg[0] = scr_gettext("scr_text_floweyintro_13") // Try dodging my&amp;bullets now!^2 &amp;Here they come!/%%%
            global.msg[1] = scr_gettext("SCR_BATTLETEXT_YELLOW_1") // %%%
            blconwriter = instance_create((obj_blconwdflowey.x + 40), (obj_blconwdflowey.y + 10), OBJ_WRITER)
            conversation = 3
        }
    }
//}
//This looks useful for the third hit song effect!
if (conversation == 17)
{
    alarm[7] = 80
    OBJ_WRITER.halt = 3
    with (blcon)
        instance_destroy()
    conversation = 18
    pitchlower = 1
}
if (conversation == 18)
{
    pitchlower -= 0.02
    if (pitchlower &gt; -0.5)
    {
        audio_sound_pitch(floweysong, (0.65 + pitchlower / 4))
        audio_sound_gain(floweysong, (0.5 + pitchlower / 2), 0)
    }
}
if instance_exists(OBJ_WRITER)
{
    if (conversation == 1)
    {
        scr_textskip()
        //Flowey introduces his friendliness pellets midway through dialogue in UTY, so I relocated that code here.
        if OBJ_WRITER.stringno = 4
        {
            instance_create((x - 5 + sprite_width / 2), (y + sprite_width / 2), obj_friendlypellet)
            instance_create((x - 5 + sprite_width / 2), (y + sprite_width / 2), obj_friendlypellet)
            instance_create((x - 5 + sprite_width / 2), (y + sprite_width / 2), obj_friendlypellet)
            instance_create((x - 5 + sprite_width / 2), (y + sprite_width / 2), obj_friendlypellet)
            instance_create((x - 5 + sprite_width / 2), (y + sprite_width / 2), obj_friendlypellet)
            conversation = 2
        }
    }
    else if (conversation == 6) //Let's try again!
    {
        if OBJ_WRITER.stringno = 1
        {
            instance_create((x - 5 + sprite_width / 2), (y + sprite_width / 2), obj_friendlypellet)
            instance_create((x - 5 + sprite_width / 2), (y + sprite_width / 2), obj_friendlypellet)
            instance_create((x - 5 + sprite_width / 2), (y + sprite_width / 2), obj_friendlypellet)
            instance_create((x - 5 + sprite_width / 2), (y + sprite_width / 2), obj_friendlypellet)
            instance_create((x - 5 + sprite_width / 2), (y + sprite_width / 2), obj_friendlypellet)
            conversation = 7
        }
    }
    else if (conversation == 11) //Don't mess it up&amp;this time.
    {
        if OBJ_WRITER.stringno = 1
        {
            instance_create((x - 5 + sprite_width / 2), (y + sprite_width / 2), obj_friendlypellet)
            instance_create((x - 5 + sprite_width / 2), (y + sprite_width / 2), obj_friendlypellet)
            instance_create((x - 5 + sprite_width / 2), (y + sprite_width / 2), obj_friendlypellet)
            instance_create((x - 5 + sprite_width / 2), (y + sprite_width / 2), obj_friendlypellet)
            instance_create((x - 5 + sprite_width / 2), (y + sprite_width / 2), obj_friendlypellet)
            conversation = 12
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (instance_exists(obj_torielcutscene) == 0)
    instance_create((xstart + 500), (ystart - 80), obj_torielcutscene)

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
