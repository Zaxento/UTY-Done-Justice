<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_wild_revolver_battle_outline</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>obj_wild_revolver_battle_outline</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>switch global.weapon2
{
    case 68:
        target_sprite = spr_wild_revolver_battle_circle_pebbles
        break
    case 79:
        target_sprite = spr_wild_revolver_battle_circle_coffee
        break
    case 81:
        target_sprite = spr_wild_revolver_battle_circle_glass
        break
    case 82:
        target_sprite = spr_wild_revolver_battle_circle_silver
        break
    case 83:
        target_sprite = spr_wild_revolver_battle_circle_nails
        break
    case 84:
        target_sprite = spr_wild_revolver_battle_circle_pellets
        break
    case 78:
        target_sprite = spr_wild_revolver_battle_circle_ice
        break
    case 80:
        target_sprite = spr_wild_revolver_battle_circle_flint
        break
    default:
        target_sprite = spr_wild_revolver_battle_circle
}

target_radius = 39
target_angle = 0
target_current = 0
target_max = 6
target_shrink_inc = 0.15
multishot_delay = 5
no_loop_delay = true
multishot_id = -4
gun_spin = false
sign_modifier = 1
time_elapsed = 0
time_max = 20
time_increase = 1
max_rise = 360 / target_max
done = 0
damage = 0
for (i = 0; i &lt; target_max; i++)
    tm[i] = time_max - 3 * i
continue_shot = true
    
//Ported from the modified Toy Gun. It's been months since I did this, so hopefully I can do this reasonably well.
global.border = 53
SCR_BORDERSETUP() // Mp worries dood changed it back to Capitals - Zax
action_set_alarm(6, 0)
fade = 0
    
//Throwing this in to make code work good. // THIS DID NOT MAKE IT WORK GOOD! // You were right!
time_elapsed = 0
target_current = 0
can_rotate = false
no_loop_rotate = false
_target_max = target_max
canshoot = 0 // This makes it so the User Event sets it to 1
// This makes it so that the pesky mathbad variable doesn't crash the game
// The stuff above did!

if (global.weapon2 = 78) || (global.weapon2 = 80) || (global.weapon2 = 83) || (global.weapon2 = 84)
{
    instance_create(319, (319 - obj_wild_revolver_battle_outline.target_radius), obj_wild_revolver_circle_multi)
}
else
{
    instance_create(319, (319 - obj_wild_revolver_battle_outline.target_radius), obj_wild_revolver_circle)
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>mons = global.monsterinstance[global.mytarget] 
		damage = 3
if target_current == 6 
{
    		damage = 10 // Damage Testing
    global.damage = damage
    global.damage += random(2)
}
    if global.weapon2 = 82
    {
        global.damage = round((global.damage * 2.8))
    }
    else
    {
        global.damage = round((global.damage * 2.2))
    }
			     script_execute(scr_attackcalc)
			     with (mons)
			     {
		          alarm[3] = 1 // Damage Alarm
            			shudder = 0 // Idk if you'll need this, but my monster object was crashing without it
            takedamage = global.damage
			     }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_user(0)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>obj_wild_revolver_battle_outline</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//if (!instance_exists(obj_target_bar_battle))
if done = 1
{
    /*if instance_exists(obj_dialogue_box_battle_transformation_attack)
    {
        with (obj_dialogue_box_battle_transformation_attack)
        {
            max_frames_default = 10
            transform_type = "out"
        }
    }*/
    image_alpha -= 0.08
    image_xscale -= 0.06
    image_yscale -= 0.06
} 
if (image_xscale &lt; 0.08)
    instance_destroy()
if ((!instance_exists(obj_wild_revolver_circle_pre)) &amp;&amp; target_current &lt; target_max &amp;&amp; ((multishot_id == noone &amp;&amp; (!instance_exists(obj_wild_revolver_circle_multi_pre))) || (multishot_id != noone &amp;&amp; instance_exists(multishot_id) &amp;&amp; multishot_id.gun_spin)) &amp;&amp; no_loop_rotate == false)
{
    if (continue_shot == false)
    {
        with (obj_circleparent_test)
            event_user(0)
    }
    else
    {
        can_rotate = true
        target_angle_default = target_angle
    }
    if (multishot_id != noone)
        multishot_id.gun_spin = false
    no_loop_rotate = true
}


if done == 0 &amp;&amp; target_current == 6
{
    //event_user(2)
    //alarm[1] = 50
    //done = 1
}
// The above code is extremely Janky and just to test if I can get it to work - Santas

if (can_rotate == true) &amp;&amp; canshoot == 1 //I did not name these variables. // I renamed them for simplicity - Santa
{
    time_elapsed += time_increase
    mathbad = power((time_elapsed / ((tm[(target_current - 1)]) / 2 * (1 / sqrt(max_rise))) - sqrt(max_rise)), 2)
    animation_disjoint_angle = sign_modifier * (max_rise - round(mathbad))
    target_angle = target_angle_default + animation_disjoint_angle
    if (time_elapsed &gt;= ((tm[(target_current - 1)]) / 2))
        event_user(0)
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="12">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>    mons = global.monsterinstance[global.mytarget] 
    script_execute(scr_attackcalc)
    global.damage = damage
    global.damage += random(2)
    if global.weapon2 = 82
    {
        global.damage = round((global.damage * 2.8))
    }
    else
    {
        global.damage = round((global.damage * 2.2))
    }
    if global.weapon2 = 79
    {
        global.damagebonus_effect = 1
    }
    else if global.weapon2 = 81
    {
        global.damagebonus_effect = 2
    }
    global.hurtanim[global.mytarget] = 1
     /*with (mons)
     {
            //shudder = 0 // Idk if you'll need this, but my monster object was crashing without it
     }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>time_elapsed = 0
target_current += 1
can_rotate = false
no_loop_rotate = false
_target_max = target_max
if instance_exists(obj_wild_revolver_circle_multi)
    _target_max -= (obj_wild_revolver_circle_multi.circle_count - 1)
if (target_current &lt; _target_max)
{
canshoot = 1
    if instance_exists(obj_wild_revolver_circle_multi)
    {
        if (!instance_exists(obj_wild_revolver_circle_multi_pre))
        {
            target_circle = instance_create(319, (319 - target_radius), obj_wild_revolver_circle_multi_pre)
            multishot_id = target_circle
            target_circle.circle_count = obj_wild_revolver_circle_multi.circle_count
            with (target_circle)
                event_user(1)
        }
        else
            exit;
    }
    else
        target_circle = instance_create(319, (319 - target_radius), obj_wild_revolver_circle_pre)
    with (target_circle)
    {
    }
}
else if instance_exists(obj_circleparent_test)
{
    with (obj_circleparent_test)
        can_execute = true
    multishot_id = obj_circleparent_test
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_sprite_ext(sprite_index, image_index, x, y, image_xscale, image_yscale, 0, c_white, image_alpha)
var target_pos = target_angle + 90
for (i = 0; i &lt; target_max; i++)
{
    if ((target_pos - i * 360 / target_max) &gt;= (-((360 / target_max))))
    {
        var x_offset = target_radius * image_xscale * (cos(degtorad(target_pos - i * 360 / target_max)))
        var y_offset = target_radius * image_xscale * (sin(degtorad(target_pos - i * 360 / target_max)))
        draw_sprite_ext(target_sprite, image_index, (x + x_offset), (y - y_offset), image_xscale, image_yscale, (target_angle - i * 360 / target_max), c_white, image_alpha)
    }
}
draw_sprite_ext(spr_wild_revolver_reticle, 0, x, y, image_xscale, image_yscale, 0, c_white, image_alpha)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="71">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.damagetimer = 5
global.hurtanim[global.mytarget] = 1
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
