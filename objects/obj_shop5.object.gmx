<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>murder = 0
ossafe_ini_open("undertale" + ".ini")
gm = ini_read_real("General", "Gameover", 0)
ossafe_ini_close()
if (scr_murderlv() &gt;= 10)
    murder = 1
instance_create(0, 0, obj_fader)
vol = 0.5
if (global.flag[7] == 0)
{
    shopmus = mus_temshop
    caster_loop(shopmus, vol, 1)
    if (murder == 1)
        audio_sound_pitch(shopmus, 0.5)
}
menumax = 3
menu = 0
menuc[0] = 0
menuc[1] = 0
menuc[2] = 0
menuc[3] = 0
menuc[4] = 0
menuc[5] = 0
menuc[6] = 0
menuc[7] = 0
item0pic = spr_heartyellow
item1pic = spr_heartyellow
item2pic = spr_heartyellow
item3pic = spr_heartyellow
item[0] = 22
item[1] = 22
item[2] = 22
item[3] = 64
if (murder == 1)
    item[3] = 22
sell = 0
bought = 0
mainmessage = 0
itemcost[0] = 3
itemcost[1] = 1
itemcost[2] = 20
itemcost[3] = 1000
minimenuy = 120
global.typer = 24
scr_setfont(fnt_maintext)
sidemessage = 0
selling = 0
global.msc = 0
glow = 0
shx = 130
instance_create(0, 0, obj_shop5_body)
soldo = 0
global.faceemotion = 0
sellpos = 0
sellpos2 = 0
for (i = 0; i &lt; 8; i += 1)
{
    value[i] = 0
    sold[i] = 0
}
value[8] = 0
value[9] = 0
value[10] = 0
thanks = 0
joytimer = 0
s_quit = 0
specialsell = 0
c_con = 0
colleg = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>c_con += 1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (global.flag[7] == 0)
    audio_stop_sound(shopmus)
instance_create(0, 0, obj_persistentfader)
room_goto(room_water_temvillage)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (global.flag[7] == 0)
{
    audio_sound_gain(shopmus, vol, 0)
    vol -= 0.02
    alarm[2] = 1
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_create(0, 0, obj_unfader)
alarm[2] = 1
alarm[3] = 40
global.entrance = 24
global.interact = 3
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var pad, hearty, heartx, textx, writerx, left_x, right_x, heart_space, max_width, price_width, separator, sep_width, xx, yy, value_x, name, scale, width, y_prompt, y_choice;
if (global.flag[276] == 0)
    itemcost[3] = 1000
else
{
    if (gm == 0)
        itemcost[3] = 9999
    if (gm == 1)
        itemcost[3] = 9000
    if (gm == 2)
        itemcost[3] = 8000
    if (gm == 3)
        itemcost[3] = 7000
    if (gm == 4)
        itemcost[3] = 6000
    if (gm == 5)
        itemcost[3] = 5000
    if (gm == 6)
        itemcost[3] = 4500
    if (gm == 7)
        itemcost[3] = 4000
    if (gm == 8)
        itemcost[3] = 3500
    if (gm == 9)
        itemcost[3] = 3000
    if (gm == 10)
        itemcost[3] = 2800
    if (gm == 11)
        itemcost[3] = 2600
    if (gm == 12)
        itemcost[3] = 2400
    if (gm == 13)
        itemcost[3] = 2200
    if (gm == 14)
        itemcost[3] = 2000
    if (gm == 15)
        itemcost[3] = 1800
    if (gm == 16)
        itemcost[3] = 1600
    if (gm == 17)
        itemcost[3] = 1400
    if (gm == 18)
        itemcost[3] = 1250
    if (gm == 19)
        itemcost[3] = 1100
    if (gm &gt;= 20)
        itemcost[3] = 1000
    if (gm &gt;= 25)
        itemcost[3] = 750
    if (gm &gt;= 30)
        itemcost[4] = 500
    if (itemcost[3] &lt; 500)
        itemcost[3] = 500
}
if (menu == 1 || menu == 2)
{
    if (menuc[1] == 0)
        scr_shop_draw_infobox(minimenuy, scr_gettext("shop5_itemdesc_22a")) // Heals 2HP#food of#tem
    if (menuc[1] == 1)
        scr_shop_draw_infobox(minimenuy, scr_gettext("shop5_itemdesc_22b")) // Heals 2HP#DISCOUNT#FOOD OF#TEM!!!
    if (menuc[1] == 2)
        scr_shop_draw_infobox(minimenuy, scr_gettext("shop5_itemdesc_22c")) // Heals 2HP#food of#tem#(expensiv)
    if (murder == 0)
    {
        if (global.flag[276] == 0)
        {
            if (menuc[1] == 3)
                scr_shop_draw_infobox(minimenuy, scr_gettext("shop5_itemdesc_college")) // COLLEGE#tem pursu#higher#education
        }
        else if (menuc[1] == 3)
            scr_shop_draw_infobox(minimenuy, scr_gettext("shop5_itemdesc_64")) // ARMOR 20DF#makes#battles#too easy
    }
    else if (menuc[1] == 3)
        scr_shop_draw_infobox(minimenuy, scr_gettext("shop5_itemdesc_22d")) // Heals 2HP#food of#tem#(qualite)
}
scr_shop_draw_window(menu &lt; 4)
draw_set_color(c_white)
if (menu == 0)
{
    specialsell = 0
    joytimer = 0
    thanks = 0
    sold[0] = 0
    sold[1] = 0
    sold[2] = 0
    sold[3] = 0
    sold[4] = 0
    sold[5] = 0
    sold[6] = 0
    sold[7] = 0
    sell = 0
    selling = 0
    sidemessage = 0
    menuc[1] = 0
    menuc[2] = 0
    menuc[3] = 0
    menuc[4] = 0
    if (instance_exists(OBJ_WRITER) == 0)
    {
        global.msg[0] = scr_gettext("obj_shop5_343") // \E0* hOI^1!&amp;* welcom to..^1.&amp;* da TEM SHOP!!!/*
        if (mainmessage == 0)
            global.msg[0] = scr_gettext("obj_shop5_344") // \E0* hOI^1!&amp;* welcom to..^1.&amp;* da TEM SHOP!!!/*
        mainmessage = 1
        instance_create(0, 110, OBJ_WRITER)
    }
    else if control_check_pressed(1)
    {
        with (OBJ_WRITER)
        {
            if (halt == false)
                stringpos = string_length(originalstring)
            control_clear(1)
        }
    }
    menumax = 3
    scr_shop_draw_topmenu(0)
    if control_check_pressed(0)
    {
        OBJ_WRITER.dfy = 1
        control_clear(0)
        if (menuc[0] == 0)
            menu = 1
        if (menuc[0] == 1)
        {
            if (global.item[0] != 0)
                menu = 5
            else
            {
                menu = 4
                sell = 1
            }
        }
        if (menuc[0] == 2)
            menu = 3
        if (menuc[0] == 3)
        {
            sell = 2
            menu = 4
        }
    }
}
if (menu == 1 || menu == 2)
{
    pad = "  "
    if (global.language == "ja")
        pad = " "
    draw_text(30, 130, scr_gettext("shop_buy_list", (pad + "3"), scr_gettext("shop5_itemname_22a"))) // tem flake
    draw_text(30, 150, scr_gettext("shop_buy_list", (pad + "1"), scr_gettext("shop5_itemname_22b"))) // tem flake (ON SALE,)
    draw_text(30, 170, scr_gettext("shop_buy_list", "20", scr_gettext("shop5_itemname_22c"))) // tem flake (expensiv)
    if (murder == 0)
    {
        if (global.flag[276] != 1)
            draw_text(30, 190, scr_gettext("shop_buy_list", "1000", scr_gettext("shop5_itemname_college"))) // tem pay 4 colleg
        else
            draw_text(30, 190, scr_gettext("shop_buy_list", string(itemcost[3]), scr_gettext("shop5_itemname_64"))) // temy ARMOR!!!
    }
    else
        draw_text(30, 190, scr_gettext("shop_buy_list", "1000", scr_gettext("shop5_itemname_22d"))) // tem flake (premiem)
    draw_text(30, 210, scr_gettext("shop_exit_submenu")) // Exit
    if (menu == 1)
    {
        menumax = 4
        if (instance_exists(OBJ_WRITER) == 0)
        {
            if (sidemessage == 0)
                global.msg[0] = scr_gettext("obj_shop5_405") // \E0hOI^1!&amp;welcome&amp;to..^1.&amp;TEM SHOP!/*
            if (sidemessage == 1)
                global.msg[0] = scr_gettext("obj_shop5_406") // \E6thanks&amp;PURCHASE!/*
            if (sidemessage == 2)
                global.msg[0] = scr_gettext("obj_shop5_407") // \E0fdshfg/*
            if (sidemessage == 3)
                global.msg[0] = scr_gettext("obj_shop5_408") // \E2you don&amp;hav da&amp;muns,/*
            if (sidemessage == 4)
                global.msg[0] = scr_gettext("obj_shop5_409") // \E1WAO!!^1!&amp;bag..^1.&amp;FULLS!/*
            instance_create(210, 110, OBJ_WRITER)
        }
        hearty = 134
        if (global.language == "ja")
            hearty -= 2
        draw_sprite(spr_heartsmall, 0, 15, (hearty + (menuc[1] * 20)))
        if control_check_pressed(0)
        {
            menu = 2
            OBJ_WRITER.dfy = 1
            if (menuc[1] == menumax)
                menu = 0
        }
        else if control_check_pressed(1)
        {
            menu = 0
            OBJ_WRITER.dfy = 1
        }
        if (menu == 2)
            control_clear(0)
        menuc[2] = 0
    }
    if (menu == 2)
    {
        heartx = (scr_shop_divider_pos() + 15)
        textx = (heartx + 5)
        if (global.language == "ja")
            textx -= 8
        menumax = 1
        global.faceemotion = 3
        draw_text(textx, 130, scr_gettext("shop5_buy_prompt1", string(itemcost[menuc[1]])))
        draw_text(textx, 145, scr_gettext("shop5_buy_prompt2", string(itemcost[menuc[1]])))
        draw_text((heartx + 15), 170, scr_gettext("shop5_buy_yes")) // Yaya
        draw_text((heartx + 15), 185, scr_gettext("shop5_buy_no")) // NO!!!
        hearty = 174
        if (global.language == "ja")
            hearty -= 2
        draw_sprite(spr_heartsmall, 0, heartx, (hearty + (menuc[2] * 15)))
        if control_check_pressed(1)
        {
            menu = 1
            control_clear(1)
            sidemessage = 2
        }
        else if control_check_pressed(0)
        {
            control_clear(0)
            if (menuc[2] == 0)
            {
                scr_cost(itemcost[menuc[1]])
                if (global.flag[276] == 0 &amp;&amp; menuc[1] == 3 &amp;&amp; afford == 1 &amp;&amp; murder == 0)
                {
                    global.gold -= 1000
                    if (global.gold &lt; 0)
                        global.gold = 0
                    colleg = 1
                    menu = 4
                    sell = 10
                    with (OBJ_WRITER)
                        instance_destroy()
                }
                else if (afford == 1)
                {
                    script_execute(scr_itemget, item[menuc[1]])
                    if (noroom == 0)
                    {
                        global.gold -= itemcost[menuc[1]]
                        sidemessage = 1
                        audio_play_sound(snd_buyitem,80,false)
                    }
                    if (noroom == 1)
                        sidemessage = 4
                }
                else
                    sidemessage = 3
            }
            if (menuc[2] == 1)
                sidemessage = 2
            if (colleg == 0)
                menu = 1
            colleg = 0
        }
    }
    if (menuc[1] != 4)
    {
        if (minimenuy &gt; (120 - scr_shop_infobox_height(0)))
            minimenuy -= 3
        if (minimenuy &gt; 55)
            minimenuy -= 2
        if (minimenuy &gt; 80)
            minimenuy -= 4
        if (minimenuy &gt; 100)
            minimenuy -= 5
    }
    else if (minimenuy &lt; 120)
        minimenuy += 20
}
if (menu == 3)
{
    menumax = 4
    scr_shop_draw_talktitle(0, 0, scr_gettext("shop5_talk1_title")) // Say Hello
    if (global.flag[276] == 0)
        scr_shop_draw_talktitle(1, 0, scr_gettext("shop5_talk2a_title")) // About Yourself
    if (global.flag[276] == 1)
        scr_shop_draw_talktitle(1, 0, scr_gettext("shop5_talk2b_title")) // About Temmie Armor
    scr_shop_draw_talktitle(2, 0, scr_gettext("shop5_talk3_title")) // Temmie History
    scr_shop_draw_talktitle(3, 0, scr_gettext("shop5_talk4_title")) // About Shop
    scr_shop_draw_talkmenu()
    if (instance_exists(OBJ_WRITER) == 0)
    {
        global.msg[0] = scr_gettext("obj_shop5_491") // \E0HOI!!^1!&amp;im temmie/*
        writerx = 210
        if (global.language == "ja")
            writerx += 2
        instance_create(writerx, 110, OBJ_WRITER)
    }
    if control_check_pressed(0)
    {
        OBJ_WRITER.dfy = 1
        if (menuc[3] &lt; menumax)
        {
            sell = (menuc[3] + 3)
            control_clear(0)
            menu = 4
        }
        else
            menu = 0
    }
    else if control_check_pressed(1)
    {
        control_clear(1)
        menu = 0
        OBJ_WRITER.dfy = 1
    }
}
if (menu &lt; 4)
    scr_shop_draw_status()
if (menu == 4)
{
    if (sell == 0)
        menu = 0
    if (instance_exists(OBJ_WRITER) == 0 &amp;&amp; selling == 0)
    {
        if (sell == 1)
            global.msg[0] = scr_gettext("obj_shop5_536") // \E2* no more item.../%%
        if (sell == 2)
            global.msg[0] = scr_gettext("obj_shop5_540") // \E0* bOI!!/%%
        if (sell == 3)
        {
            global.msg[0] = scr_gettext("obj_shop5_544") // \E0* hOI!!!/
            global.msg[1] = scr_gettext("obj_shop5_545") // * i'm temmie/%%
        }
        if (sell == 4)
        {
            global.msg[0] = scr_gettext("obj_shop5_549") // \E0* hOI!!!/
            global.msg[1] = scr_gettext("obj_shop5_550") // * i'm temmie/%%
            if (global.flag[276] == 1)
            {
                global.msg[0] = scr_gettext("obj_shop5_554") // \E1* tem armor so GOOds^1!&amp;* any battle becom^1!&amp;* a EASY victories!!!/
                global.msg[1] = scr_gettext("obj_shop5_555") // \E4* but^1, hnnn^1, tem think..^1.&amp;* if u use armors^1, battles woudn b&amp;  a challenge anymores,/
                global.msg[2] = scr_gettext("obj_shop5_556") // \E3* but tem..^1.&amp;* have a solushun!/
                global.msg[3] = scr_gettext("obj_shop5_557") // \W* \E6tem wil offer..^1.\Y &amp;* a SKOLARSHIPS\W!/
                global.msg[4] = scr_gettext("obj_shop5_558") // \W*\E3 if u \Ylose a lot of battles^1, \W &amp;  tem wil \YLOWER THE PRICE\W!/
                global.msg[5] = scr_gettext("obj_shop5_559") // \E3* so if you get to TOUGH BATLE&amp;  and feel FRUSTRATE^1, can buy&amp;  TEM armor as last resort!/
                global.msg[6] = scr_gettext("obj_shop5_560") // \E5* but tem armor so goods^1,&amp;* promise to only buy if you&amp;  really needs it^1,/%%
                if (gm &gt; 18)
                {
                    global.msg[5] = scr_gettext("obj_shop5_564") // \E1* in fack..^1.&amp;* PRICE MAY ALREADY BE LOWERS!!!&amp;* WOA!!!!/
                    global.msg[6] = scr_gettext("obj_shop5_565") // \E6* Congra-tem-lations!!!/%%
                }
            }
        }
        if (sell == 5)
        {
            global.msg[0] = scr_gettext("obj_shop5_575") // \E0* us tems hav a DEEP HISTORY!!!/%%
            if (global.flag[276] == 1)
                global.msg[0] = scr_gettext("obj_shop5_579") // \E0* yaYA!!^1!&amp;* tem got degree in TEM STUDIES^1!&amp;* tem can tell you all about&amp;  tem's DEEP HISTORY!!!/%%
        }
        if (sell == 6)
            global.msg[0] = scr_gettext("obj_shop5_584") // \E0* yaYA!!!&amp;* go to TEM SHOP!!!/%%
        if (sell == 7)
        {
            global.msg[0] = scr_gettext("obj_shop5_589") // \E1* WOA!!/
            global.msg[1] = scr_gettext("obj_shop5_590", global.itemnameb[sellpos])
            global.msg[2] = scr_gettext("obj_shop5_591", global.itemnameb[sellpos])
            if (global.flag[276] == 1)
                global.msg[2] = scr_gettext("obj_shop5_594", global.itemnameb[sellpos])
            global.msg[3] = scr_gettext("obj_shop5_596", global.itemnameb[sellpos])
        }
        if (sell == 8)
        {
            global.msg[0] = scr_gettext("obj_shop5_601") // \E2* b..^1 but.../
            global.msg[1] = scr_gettext("obj_shop5_602") // \E4* p!!!!!!!!!!!!/%%
        }
        if (sell == 9)
        {
            global.msg[0] = scr_gettext("obj_shop5_607") // \E3* You will regret this./%%
            if (global.flag[276] == 1)
                global.msg[0] = scr_gettext("obj_shop5_611") // \E3* Is this a joke^1?&amp;* Are you having a chuckle^1?&amp;* Ha ha^1, very funny^1.&amp;* I'm the one with a degree./%%
        }
        instance_create(10, 110, OBJ_WRITER)
        selling = 1
    }
    if (sell == 10)
    {
        if (c_con == 0)
        {
            with (OBJ_WRITER)
                instance_destroy()
            selling = 9
            global.msg[0] = scr_gettext("obj_shop5_633") // \E1* WOA!!/
            global.msg[1] = scr_gettext("obj_shop5_634") // \E2* thas ALOT o muns..^1.&amp;* can tem realy acepts.../
            global.msg[2] = scr_gettext("obj_shop5_635") // \E7* OKs!!!^1!&amp;* tem go to colleg and make&amp;  u prouds!!!/%%
            instance_create(10, 110, OBJ_WRITER)
            c_con = 1
        }
        if (c_con == 1 &amp;&amp; instance_exists(OBJ_WRITER) == 0)
        {
            with (OBJ_WRITER)
                instance_destroy()
            if (global.flag[7] == 0)
                audio_stop_sound(shopmus)
            c_con = 2
            alarm[4] = 120
        }
        if (c_con == 2)
        {
            obj_shop5_body.bodyx += 3
            obj_shop5_body.boxx += 3
        }
        if (c_con == 3)
        {
            c_con = 4
            alarm[4] = 120
            global.flag[276] = 1
        }
        if (c_con == 4)
        {
            obj_shop5_body.bodyx -= 3
            obj_shop5_body.boxx -= 3
        }
        if (c_con == 5)
        {
            if (global.flag[7] == 0)
                audio_resume_sound(shopmus)
            global.msg[0] = scr_gettext("obj_shop5_672") // * tem bak from cool leg,/
            global.msg[1] = scr_gettext("obj_shop5_673") // \E0* tem learn MANY THINs^1,&amp;* learn to sell new ITEM^1!&amp;* yayA!!!/%%
            instance_create(10, 110, OBJ_WRITER)
            c_con = 6
        }
        if (c_con == 6 &amp;&amp; instance_exists(OBJ_WRITER) == 0)
        {
            selling = 1
            c_con = -1
        }
    }
    if instance_exists(OBJ_WRITER)
    {
        if control_check_pressed(1)
        {
            with (OBJ_WRITER)
            {
                if (halt == false)
                    stringpos = string_length(originalstring)
                control_clear(1)
            }
        }
    }
    if (selling == 1 &amp;&amp; instance_exists(OBJ_WRITER) == 0)
    {
        if (sell == 2)
        {
            selling = 2
            event_user(1)
        }
        else
        {
            if (sell == 1 || sell == 9 || sell == 10)
                menu = 0
            else
                menu = 3
            if (sell == 7)
            {
                menu = 6
                buffer = 4
                value[sellpos] = (value[sellpos] + 1)
                specialsell = 1
                sellpos2 = 0
            }
            if (sell == 8)
            {
                menu = 6
                buffer = 4
                value[sellpos] = (ceil((value[sellpos] * 1.25)) + 1)
                specialsell = 2
                sellpos2 = 0
            }
            sell = 0
            selling = 0
        }
    }
}
if (menu == 5)
{
    specialsell = 0
    joytimer -= 1
    if (joytimer &lt;= 0)
        global.faceemotion = 0
    draw_set_color(c_white)
    scr_setfont(fnt_maintext)
    value[0] = 1
    value[1] = 1
    value[2] = 1
    value[3] = 1
    value[4] = 1
    value[5] = 1
    value[6] = 1
    value[7] = 1
    scr_itemvalue()
    scr_itemnameb()
    value[8] = 0
    value[9] = 0
    value[10] = 0
    left_x = 15
    right_x = 155
    heart_space = 15
    max_width = 999
    if (global.language == "ja")
    {
        left_x = 12
        right_x = 163
        heart_space = 13
        max_width = 84
    }
    for (i = 0; i &lt; 8; i += 1)
    {
        s_value[i] = scr_gettext("shop5_sell_price", string(value[i]))
        if (value[i] == -1)
            s_value[i] = scr_gettext("shop5_sell_unsellable") // NO!
    }
    odd = -1
    hearty = 134
    if (global.language == "ja")
        hearty -= 2
    if (sellpos == 0 || sellpos == 2 || sellpos == 4 || sellpos == 6)
    {
        odd = 0
        draw_sprite(spr_heartsmall, 0, left_x, (hearty + ((sellpos / 2) * 20)))
    }
    if (sellpos == 1 || sellpos == 3 || sellpos == 5 || sellpos == 7)
    {
        odd = 1
        draw_sprite(spr_heartsmall, 0, right_x, (hearty + (((sellpos - 1) / 2) * 20)))
    }
    if (sellpos == 8)
        draw_sprite(spr_heartsmall, 0, left_x, (hearty + 80))
    if (keyboard_check_pressed(vk_right) &amp;&amp; odd == 0)
    {
        if (value[(sellpos + 1)] != 0)
            sellpos += 1
    }
    if (keyboard_check_pressed(vk_left) &amp;&amp; odd == 1)
        sellpos -= 1
    if keyboard_check_pressed(vk_down)
    {
        d_fail = 0
        if (value[(sellpos + 2)] == 0)
            d_fail = 1
        if (d_fail == 1 &amp;&amp; odd == 1 &amp;&amp; value[(sellpos + 1)] != 0)
            d_fail = 2
        if (sellpos == 6 || sellpos == 7 || sellpos == 8)
            d_fail = 1
        if (d_fail == 1)
            sellpos = 8
        else if (d_fail == 2)
            sellpos += 1
        else
            sellpos += 2
    }
    if keyboard_check_pressed(vk_up)
    {
        if (sellpos != 0 &amp;&amp; sellpos != 1)
        {
            if (sellpos == 8)
            {
                sellpos = 0
                if (value[2] != 0)
                    sellpos = 2
                if (value[4] != 0)
                    sellpos = 4
                if (value[6] != 0)
                    sellpos = 6
            }
            else
                sellpos -= 2
        }
    }
    draw_set_color(c_white)
    price_width = round(string_width(scr_gettext("shop5_sell_price", "888")))
    separator = scr_gettext("shop5_sell_separator") //  - 
    sep_width = string_width(separator)
    for (i = 0; i &lt; 4; i += 1)
    {
        xx = (left_x + heart_space)
        yy = (130 + (i * 20))
        draw_set_color(c_white)
        if (value[(i * 2)] != 0 &amp;&amp; sold[(i * 2)] == 0)
        {
            xx += price_width
            value_x = (xx - round(string_width(s_value[(i * 2)])))
            draw_text(value_x, yy, s_value[(i * 2)])
            draw_text(xx, yy, separator)
            xx += sep_width
            name = global.itemnameb[(i * 2)]
            scale = 1
            width = string_width(name)
            if (width &gt; max_width)
                scale = (max_width / width)
            draw_text_transformed(xx, yy, name, scale, 1, 1)
        }
        else if (sold[(i * 2)] == 1)
        {
            draw_set_color(c_gray)
            draw_text(xx, yy, scr_gettext("shop5_sell_sold")) // (thanks PURCHASE)
        }
        xx = (right_x + heart_space)
        draw_set_color(c_white)
        if (value[((i * 2) + 1)] != 0 &amp;&amp; sold[((i * 2) + 1)] == 0)
        {
            xx += price_width
            value_x = (xx - round(string_width(s_value[((i * 2) + 1)])))
            draw_text(value_x, yy, s_value[((i * 2) + 1)])
            draw_text(xx, yy, separator)
            xx += sep_width
            name = global.itemnameb[((i * 2) + 1)]
            scale = 1
            width = string_width(name)
            if (width &gt; max_width)
                scale = (max_width / width)
            draw_text_transformed(xx, yy, name, scale, 1, 1)
        }
        else if (sold[((i * 2) + 1)] == 1)
        {
            draw_set_color(c_gray)
            draw_text(xx, yy, scr_gettext("shop5_sell_sold")) // (thanks PURCHASE)
        }
    }
    draw_set_color(c_white)
    draw_text(30, 210, scr_gettext("shop_exit_submenu")) // Exit
    draw_set_color(c_yellow)
    draw_text(200, 210, scr_gettext("shop5_sell_gold")) // (\[G] G)
    if control_check_pressed(0)
    {
        joytimer = 0
        buffer = 3
        if (sellpos == 8)
            menu = 0
        else if (value[sellpos] &gt; 0)
        {
            sellqual = 0
            if (global.flag[265] &lt;= 1)
                sellqual = 1
            if (global.flag[266] == 0 &amp;&amp; global.item[sellpos] == 22)
            {
                sellqual = 1
                global.flag[266] = 1
            }
            if (sellqual == 1)
            {
                menu = 4
                sell = 7
                global.flag[265] = 9
            }
            else
            {
                menu = 6
                sellpos2 = 0
            }
        }
        //else
        //    audio_play_sound(snd_mtt9,80,false)
    }
    if control_check_pressed(1)
    {
        menu = 0
        sellpos = 0
    }
}
if (menu == 6)
{
    global.faceemotion = 3
    buffer -= 1
    y_prompt = 150
    y_choice = 180
    if (global.language == "ja")
    {
        y_prompt -= 8
        y_choice += 6
    }
    draw_set_color(c_white)
    scr_setfont(fnt_maintext)
    if (specialsell != 2)
        draw_text(55, y_prompt, scr_gettext("shop5_sell_prompt", string(global.itemnameb[sellpos]), string(value[sellpos])))
    else
    {
        global.faceemotion = 5
        draw_text(55, y_prompt, scr_gettext("shop5_sell_prompt_special", string(global.itemnameb[sellpos]), string(value[sellpos])))
    }
    draw_text(80, y_choice, scr_gettext("shop5_sell_yes")) // yayA!
    draw_text(190, y_choice, scr_gettext("shop5_sell_no")) // NO!!!
    draw_sprite(spr_heartsmall, 0, (65 + (sellpos2 * 110)), (y_choice + 5))
    draw_set_color(c_yellow)
    draw_text(200, 210, scr_gettext("shop5_sell_gold")) // (\[G] G)
    if (keyboard_check_pressed(vk_left) || keyboard_check_pressed(vk_right))
    {
        if (sellpos2 == 0)
            sellpos2 = 1
        else
            sellpos2 = 0
    }
    if (control_check_pressed(1) &amp;&amp; buffer &lt;= 0)
    {
        buffer = 1
        s_quit = 1
    }
    if (control_check_pressed(0) &amp;&amp; buffer &lt;= 0)
    {
        if (sellpos2 == 1)
            s_quit = 1
        else
        {
            if (global.item[sellpos] != 22)
                global.flag[265] -= 1
            joytimer = 90
            global.faceemotion = 6
            audio_play_sound(snd_buyitem,80,false)
            global.gold += value[sellpos]
            scr_itemshift(sellpos, 0)
            thanks += 1
            if (thanks &gt; 8)
                thanks = 8
            sold[(8 - thanks)] = 1
            if (global.item[sellpos] == 0 &amp;&amp; sellpos &gt; 0)
                sellpos -= 1
            if (global.item[0] != 0)
                menu = 5
            else
                menu = 0
        }
    }
    if (s_quit == 1)
    {
        s_quit = 0
        menu = 5
        if (specialsell &gt; 0)
        {
            if (specialsell == 1)
            {
                menu = 4
                sell = 8
            }
            if (specialsell == 2)
            {
                menu = 4
                sell = 9
            }
        }
    }
}
if keyboard_check_pressed(vk_down)
{
    menuc[menu] += 1
    if (menuc[menu] &gt; menumax)
        menuc[menu] = 0
}
if keyboard_check_pressed(vk_up)
{
    menuc[menu] -= 1
    if (menuc[menu] &lt; 0)
        menuc[menu] = menumax
}
if (global.debug == true)
{
    if keyboard_check_pressed(ord("G"))
        global.gold = 5000
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
